---
title: 'querySelectorLive'
namespace: '@blackbyte.sugar.js.dom.query'
description: 'Observe the dom to get all the elements that matches a passed css selector at any point in time. Be warned that this use the mutation observer API and will monitor all the document for new nodes. Make sure to use it when you don&#39;t have the chance to use the custom elements API instead'
type: 'Function'
status: 'stable'
since: '1.0.0'
platform: '[{"name":"js","description":""}]'
author: '{"name":"Olivier Bossel","email":"olivier.bossel@gmail.com","url":"https://lotsof.dev"}'
---
<div class="docmap -mdx">
# querySelectorLive
<div class="docmap_metas">
<div class="docmap_type"><span class="docmap_type-label">Type:</span><span class="docmap_type-value">Function</span></div>
<div class="docmap_status"><span class="docmap_status-label">Status:</span><span class="docmap_status-value -stable">stable</span></div>
<div class="docmap_since"><span class="docmap_since-label">Since:</span><span class="docmap_since-value">1.0.0</span></div>
<div class="docmap_platform"><span class="docmap_platform-label">Platform:</span><span class="docmap_platform-value -js">js</span></div>
</div>
<div class="docmap_namespace">@blackbyte.sugar.js.dom.query</div>
<div class="docmap_description typo-lead typo-format">
Observe the dom to get all the elements that matches a passed css selector at any point in time.
Be warned that this use the mutation observer API and will monitor all the document for new nodes. Make sure to use it
when you don&#39;t have the chance to use the custom elements API instead
</div>
<div class="docmap_params">
## Params
<ol class="docmap_list">
<li class="docmap_item">
<span class="docmap_name">selector<span class="docmap_required">*</span></span><span class="docmap_default">-</span> <span class="docmap_type">String</span>
<p class="docmap_description">The css selector that we are interested in</p>
</li>
<li class="docmap_item">
<span class="docmap_name">cb<span class="docmap_required">*</span></span><span class="docmap_default">-</span> <span class="docmap_type">Function</span>
<p class="docmap_description">The function to call with the newly added node</p>
</li>
<li class="docmap_item">
<span class="docmap_name">settings</span><span class="docmap_default">&lcub;&rcub;</span> <span class="docmap_type">TQuerySelectorLiveSettings</span>
<p class="docmap_description">An optional settings object to specify things like the rootNode to monitor&comma; etc&period;&period;&period;</p>
</li>
</ol>
</div>
<div class="docmap_return">
## Return
<ol class="docmap_list">
<li class="docmap_item">
<span class="docmap_default">-</span><span class="docmap_type">SPromise&lt;HTMLElement&gt;</span>
<p class="docmap_description">An SPromise instance on which to listen for nodes using the &quot;node&quot; event</p>
</li>
</ol>
</div>
<div class="docmap_examples">
## Example
<s-code language="js" header>
```js
import { querySelectorLive } from '@lotsof/sugar/dom'
const query = querySelectorLive('.my-cool-item', (node, api) => {
	    // do something here with the detected node
     // call api.cancel if you want to stop listening for this selector
     api.cancel();
});
// cancel the query manually when needed
query.cancel();
```
</s-code>
</div>
<div class="docmap_settings">
## Settings
<ol class="docmap_list">
<li class="docmap_item">
<span class="docmap_name">rootNode</span><span class="docmap_default">document</span> <span class="docmap_type">HTMLElement</span>
<p class="docmap_description">The root node from where to observe childs</p>
</li>
<li class="docmap_item">
<span class="docmap_name">once</span><span class="docmap_default">true</span> <span class="docmap_type">Boolean</span>
<p class="docmap_description">If true, each observed nodes will be handled only once even if they are removed and reinjected in the dom</p>
</li>
<li class="docmap_item">
<span class="docmap_name">[afterFirst]<span class="docmap_required">*</span></span><span class="docmap_default">-</span> <span class="docmap_type">Function</span>
<p class="docmap_description">A function that will be called once the first scan is done</p>
</li>
<li class="docmap_item">
<span class="docmap_name">scopes</span><span class="docmap_default">true</span> <span class="docmap_type">Boolean</span>
<p class="docmap_description">If true, the selector will be searched inside elements with the "s-scope" attribute as scopes</p>
</li>
<li class="docmap_item">
<span class="docmap_name">firstOnly</span><span class="docmap_default">false</span> <span class="docmap_type">Boolean</span>
<p class="docmap_description">If true, the query will stop after the first matching node is found</p>
</li>
<li class="docmap_item">
<span class="docmap_name">[when]<span class="docmap_required">*</span></span><span class="docmap_default">-</span> <span class="docmap_type">TWhenTrigger&vert;string</span>
<p class="docmap_description">An optional when trigger or array of triggers to wait for before calling the callback with the detected node</p>
</li>
<li class="docmap_item">
<span class="docmap_name">[disconnectedCallback]<span class="docmap_required">*</span></span><span class="docmap_default">-</span> <span class="docmap_type">Function</span>
<p class="docmap_description">An optional callback function that will be called when a previously detected node is removed from the dom</p>
</li>
<li class="docmap_item">
<span class="docmap_name">attributes</span><span class="docmap_default">&lcub;&lpar;&apos;esm&apos;&vert;&apos;cjs&apos;&rpar;&lsqb;&rsqb;&rcub;</span> <span class="docmap_type">String&lsqb;&rsqb;</span>
<p class="docmap_description">An optional array of attributes to monitor for changes (in addition to class and id)</p>
</li>
</ol>
</div>
<div class="docmap_author">
## Author
<ul class="docmap_list">
<li class="docmap_item">
<span class="docmap_name">Olivier Bossel</span>
<span class="docmap_email">olivier.bossel@gmail.com</span>
<a href="https://lotsof.dev" target="_blank" class="docmap_url">https://lotsof.dev</a>
</li>
</ul>
</div>
</div>